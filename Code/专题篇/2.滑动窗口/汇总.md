
# 刷完这 12 道滑动窗口，就可以手撕前端面试了
## 前言
经常会有人问，作为前端，你在实际工作中用到过哪些算法，之前我回答是，树和位运算，而最近在学习网络模块，发现了和前端，起码是和网络相关的一种算法，那就是 `滑动窗口`；

我们知道在 HTTP1.1 发送请求，TCP 会将请求传输到服务端，而对于 TCP 协议，最重要的能力之一就是控制流速；

当发送方需要发送很多请求的时候，这些请求会阻塞在某一个缓存中等待 TCP 发送，这个后面还有源源不断的请求发起，那总不能一下子全堵在缓存上吧，会炸掉的，这个时候这个模型就是滑动窗口了


![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/debe95018acd43bfa50bf35de3ffa804~tplv-k3u1fbpfcp-watermark.image)

发送过程有三个状态：
- 绿色是发送并连接成功的
- 浅绿色是发送，但是还没有收到 ACK 响应的，这个时候有可能会挂掉，所以这个时候发送方还得存着这个请求随时准备重发
- 白色是等待发送的
- 后面那些就是被阻塞的请求了

这个时候 TCP 能够缓存的请求数就是一个窗口，每当浅绿色转成深绿色，那么窗口就可以像右边滑动，而窗口还保留的状态依然可以复用，这就是`滑动窗口` 的魅力了

滑动窗口最大特点是，滑动窗口过程中，保留在窗口里的数据状态直接复用，不需要再次构建，节约资源；

那么接下来我们通过做题来熟悉一下滑窗，并看看是否有更多不一样的情况吧；


引流一下 

[刷完这 20 道二分题，可能还是手撕不了大厂面试](https://juejin.cn/post/6999053946807386119)

[刷完这几道堆题，可能还是手撕不了大厂面试](https://juejin.cn/post/6990532472279105572/)

[刷完这 30 道树题，可能还是手撕不了大厂面试](https://juejin.cn/post/6993955773218816008)

[刷完这 20 道链表题，可能还是手撕不了大厂面试](https://juejin.cn/post/6996127305919627277) 

[刷完这 15 道 dp 题，只能碰运气押题进大厂了](https://juejin.cn/post/7001862751454756894) 

[刷完这 几 道位运算，等等再考虑手撕大厂面试吧 -- 没通过审核，后面改了之后再搞](https://juejin.cn/post/7001862751454756894)

## 正文

根据滑窗窗口大小是否固定，分成了两种：`固定大小的窗口` 和 `可变窗口大小`;

前言谈及的 TCP 中的滑窗情况，其实是一个固定大小的滑窗，当然也可以先给定部分大小，然后根据流速进行扩展，那是后续的操作了；

而更多的情况是不固定大小的滑窗，这类滑窗一般都是创建过程中，一股脑子将资源耗尽去扩大窗口，达到一个阈值，然后再收缩窗口，根据具体题目，达到一个平衡了；

这其实就好像是一个快速试错过程，先将情况推到极致了，然后加入对应的变量来收缩窗口，找到比较合适的一个情况，等到合规的情况在窗口里打破了，就重新扩展；

滑窗其实在理解题意的时候，又有点一分为二的感觉，就是我可以将窗口里的状态和窗口外的状态切分开，但是他们又是`此消彼长`的关系，这样不断权衡,达到一个动态平衡的状态，就是某些题的结果

### 模板

固定大小的窗口
- l 初始化为 0
- 初始化 r, 使得 r-l+1 就是窗口大小
- 同时移动 l 和 r
- 判断窗口内的连续元素是否满足题目限定的条件

可变窗口大小
- l r 都初始化为 0
- r 指针移动一步
- 判断窗口内的连续元素是否满足条件
    - 满足，再判断是否需要更新最优解；如果需要则更新，并尝试通过移动 l 指针缩小窗口的大小
    - 不满足，则继续


### 双滑窗现象

- 普通的不定滑窗都是先走 r 指针，然后到达触发条件，然后收缩 l 指针，收缩到不达标之后停止，然后 r 指针重新启动
- 但是有那么一些题目，当 r 指针达标后, l 指针在一段范围内 [l1,l2)，且可能与后续的 [r1,r2) 任何两个指针构成的滑窗都会构成合规的滑窗
- 那么这个时候用单个指针 l 收缩到不符合要求的 l2,那么就只产生 [l1,l2）与 r1 的条件，而本来应该合规的 lx-rx 都被干掉了(lx 在 [l1,l2] 中)，因为这个时候 l 已经跑到 l2 处了
- 这个时候就需要开两个指针 l1, l2 ，每次固定 r 指针的时候，我们找出第一个符合要求的 l1, 和截止位置 l2,然后继续让 r 走，移动过程始终保持两个滑窗 [l1.r],[l2,r]，可以保证在整个移动过程所有的情况都考虑到了
- 这类题目都是求数量，比方说`某种情况的子数组有多少个`，这样就得将所有情况都弄出来，但是如果只是要求一个极值，比方说这些符合要求的情况中，最小是多少，那么就没必要用双滑窗了，因为 r 指针的移动肯定会扩大窗口，所以 l 指针只需要保留对应的极值(第一个或者最后一个)，然后求出极值即可

匹配的题目是
[930. 和相同的二元子数组](https://leetcode-cn.com/problems/binary-subarrays-with-sum/solution/shuang-hua-chuang-shuang-zhi-zhen-qian-z-s4yi/)

[992. K 个不同整数的子数组](https://leetcode-cn.com/problems/subarrays-with-k-different-integers/solution/shuang-hua-chuang-by-jzsq_lyx-yryh/)

[1248. 统计「优美子数组」](https://leetcode-cn.com/problems/count-number-of-nice-subarrays/solution/shuang-hua-chuang-by-jzsq_lyx-er3o/)

### 最后

滑窗是双指针的一种特殊情况，我们在使用双指针处理问题的时候，可能不会考虑前一个窗口里的状态值，只是将所有情况都考虑进行，这样就会有很多计算是重复的，滑窗就是一种优化了的双指针情况。

所以算法还是有点用的，起码在初级的时候，我们可以更好的理解我们使用的工具的内核，而不仅仅只是雾里看花，知其然不知其所以然；

所以加油！！

## 题目列表

### 固定窗口
- [438. 找到字符串中所有字母异位词](https://leetcode-cn.com/problems/find-all-anagrams-in-a-string/solution/hua-dong-chuang-kou-by-jzsq_lyx-n5qp/)

### 不固定窗口
- [3. 无重复字符的最长子串](https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/solution/mapbu-gu-ding-da-xiao-de-hua-chuang-by-j-9sgy/)
- [76. 最小覆盖子串](https://leetcode-cn.com/problems/minimum-window-substring/solution/bu-ding-chuang-kou-de-hua-chuang-by-jzsq-sz7k/)
- [209. 长度最小的子数组](https://leetcode-cn.com/problems/minimum-size-subarray-sum/submissions/)
- [904.水果成篮](https://leetcode-cn.com/problems/fruit-into-baskets/solution/hua-dong-chuang-kou-by-jzsq_lyx-dvdz/)
- [930. 和相同的二元子数组](https://leetcode-cn.com/problems/binary-subarrays-with-sum/solution/shuang-hua-chuang-shuang-zhi-zhen-qian-z-s4yi/)
- [992. K 个不同整数的子数组](https://leetcode-cn.com/problems/subarrays-with-k-different-integers/solution/shuang-hua-chuang-by-jzsq_lyx-yryh/)
- [978. 最长湍流子数组](https://leetcode-cn.com/problems/longest-turbulent-subarray/solution/hua-chuang-by-jzsq_lyx-n4ru/)
- [1004. 最大连续1的个数 III](https://leetcode-cn.com/problems/max-consecutive-ones-iii/solution/shuang-zhi-zhen-by-jzsq_lyx-obxu/)
- [1234. 替换子串得到平衡字符串](https://leetcode-cn.com/problems/replace-the-substring-for-balanced-string/solution/maphua-chuang-by-jzsq_lyx-mh2n/)
- [1248. 统计「优美子数组」](https://leetcode-cn.com/problems/count-number-of-nice-subarrays/solution/shuang-hua-chuang-by-jzsq_lyx-er3o/)
- [1658. 将 x 减到 0 的最小操作数](https://leetcode-cn.com/problems/minimum-operations-to-reduce-x-to-zero/solution/hua-dong-chuang-kou-by-jzsq_lyx-bz12/)
